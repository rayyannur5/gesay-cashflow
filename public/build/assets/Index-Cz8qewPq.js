import{r as h,j as e,H as I,a as j}from"./app-DUWjG-6a.js";import{A as F,b as B}from"./AuthenticatedLayout-C2pqy8tC.js";import{C as A,a as H,b as P,e as R,B as r}from"./button-BWY58xbn.js";import{L as c,I as g}from"./label-BUGVscvC.js";import{T as O,D as z,a as K,b as L,c as V,d as q,e as E}from"./dialog-4zBuSsmK.js";import{S as f,a as N,b as _,c as y,d as b}from"./select-DbF5vKx3.js";import{T as J,a as $,b as v,c as n,d as Y,e as i}from"./table-wh01RLgy.js";import{T as G}from"./textarea-D04gsa9o.js";import{A as C}from"./arrow-right-h7SYIali.js";import{P as M}from"./plus-_r1EMer9.js";import"./transition-JCV-Tk4J.js";import"./wallet-BB8pzZv-.js";import"./index-KJV2KXD7.js";import"./index-DTbb3uOn.js";import"./index-CUAFPwAC.js";import"./check-Dcy0YlFh.js";const u=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),Q=t=>new Date(t).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"});function xe({transfers:t,balances:o}){const[T,d]=h.useState(!1),[S,m]=h.useState(null),[s,l]=h.useState({from_balance_id:"",to_balance_id:"",amount:"",description:"",transfer_date:new Date().toISOString().split("T")[0]}),p=()=>{l({from_balance_id:"",to_balance_id:"",amount:"",description:"",transfer_date:new Date().toISOString().split("T")[0]})},D=a=>{a.preventDefault(),j.post(route("transfers.store"),{...s,amount:parseFloat(s.amount)||0},{onSuccess:()=>{d(!1),p()}})},w=a=>{j.delete(route("transfers.destroy",a),{onSuccess:()=>m(null)})},x=o.find(a=>a.id.toString()===s.from_balance_id);return e.jsxs(F,{header:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Transfer"}),e.jsx("p",{className:"text-sky-100 text-sm mt-1",children:"Pindahkan saldo antar dompet"})]}),e.jsxs(z,{open:T,onOpenChange:d,children:[e.jsx(K,{asChild:!0,children:e.jsxs(r,{className:"shadow-lg",onClick:()=>{p(),d(!0)},children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Transfer Baru"]})}),e.jsxs(L,{children:[e.jsxs(V,{children:[e.jsx(q,{children:"Transfer Baru"}),e.jsx(E,{children:"Pindahkan saldo antar dompet"})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-[1fr,auto,1fr] gap-2 items-end",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Dari"}),e.jsxs(f,{value:s.from_balance_id,onValueChange:a=>l({...s,from_balance_id:a}),children:[e.jsx(N,{children:e.jsx(_,{placeholder:"Pilih balance"})}),e.jsx(y,{children:o.map(a=>e.jsx(b,{value:a.id.toString(),disabled:a.id.toString()===s.to_balance_id,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:a.icon}),e.jsx("span",{children:a.name}),e.jsxs("span",{className:"text-gray-400 text-xs",children:["(",u(a.amount),")"]})]})},a.id))})]})]}),e.jsx("div",{className:"pb-2",children:e.jsx(C,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{children:"Ke"}),e.jsxs(f,{value:s.to_balance_id,onValueChange:a=>l({...s,to_balance_id:a}),children:[e.jsx(N,{children:e.jsx(_,{placeholder:"Pilih balance"})}),e.jsx(y,{children:o.map(a=>e.jsx(b,{value:a.id.toString(),disabled:a.id.toString()===s.from_balance_id,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:a.icon}),e.jsx("span",{children:a.name})]})},a.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"amount",children:"Jumlah"}),e.jsx(g,{id:"amount",type:"number",value:s.amount,onChange:a=>l({...s,amount:a.target.value}),placeholder:"0",min:"1",max:x?.amount||void 0,required:!0}),x&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Saldo tersedia: ",u(x.amount)]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"transfer_date",children:"Tanggal"}),e.jsx(g,{id:"transfer_date",type:"date",value:s.transfer_date,onChange:a=>l({...s,transfer_date:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Keterangan (opsional)"}),e.jsx(G,{id:"description",value:s.description,onChange:a=>l({...s,description:a.target.value}),placeholder:"Catatan transfer...",rows:2})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Batal"}),e.jsx(r,{type:"submit",children:"Transfer"})]})]})]})]})]}),children:[e.jsx(I,{title:"Transfers"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs(A,{children:[e.jsx(H,{children:e.jsx(P,{children:"Riwayat Transfer"})}),e.jsxs(R,{children:[t.data.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(B,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Belum ada transfer"}),e.jsx("p",{className:"text-sm",children:"Transfer antar balance akan muncul di sini"})]}):e.jsxs(J,{children:[e.jsx($,{children:e.jsxs(v,{children:[e.jsx(n,{children:"Tanggal"}),e.jsx(n,{children:"Dari"}),e.jsx(n,{}),e.jsx(n,{children:"Ke"}),e.jsx(n,{className:"text-right",children:"Jumlah"}),e.jsx(n,{children:"Keterangan"}),e.jsx(n,{className:"text-right",children:"Aksi"})]})}),e.jsx(Y,{children:t.data.map(a=>e.jsxs(v,{children:[e.jsx(i,{className:"text-gray-500",children:Q(a.transfer_date)}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:`${a.from_balance.color}20`},children:a.from_balance.icon}),e.jsx("span",{children:a.from_balance.name})]})}),e.jsx(i,{children:e.jsx(C,{className:"w-4 h-4 text-gray-400"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:`${a.to_balance.color}20`},children:a.to_balance.icon}),e.jsx("span",{children:a.to_balance.name})]})}),e.jsx(i,{className:"text-right font-semibold",children:u(a.amount)}),e.jsx(i,{className:"text-gray-500 max-w-[200px] truncate",children:a.description||"-"}),e.jsx(i,{className:"text-right",children:S===a.id?e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(r,{variant:"destructive",size:"sm",onClick:()=>w(a.id),children:"Ya"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>m(null),children:"Tidak"})]}):e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>m(a.id),className:"text-red-500 hover:text-red-700",children:e.jsx(O,{className:"w-4 h-4"})})})]},a.id))})]}),t.last_page>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:Array.from({length:t.last_page},(a,k)=>k+1).map(a=>e.jsx(r,{variant:a===t.current_page?"default":"outline",size:"sm",onClick:()=>j.get(route("transfers.index",{page:a})),children:a},a))})]})]})})})]})}export{xe as default};
