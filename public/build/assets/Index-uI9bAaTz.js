import{r as h,j as e,H as B,L as j,a as m}from"./app-DUWjG-6a.js";import{A as I,a as K}from"./AuthenticatedLayout-C2pqy8tC.js";import{C as N,a as z,b as M,e as k,B as l,h as R,g as y}from"./button-BWY58xbn.js";import{B as V}from"./badge-DzYJ36Mf.js";import{L as x,I as b}from"./label-BUGVscvC.js";import{S as u,a as p,b as g,c as f,d as t}from"./select-DbF5vKx3.js";import{T as O,a as E,b as T,c as i,d as $,e as n}from"./table-wh01RLgy.js";import{T as q,D as J,b as G,c as Q,d as U,e as W,f as X}from"./dialog-4zBuSsmK.js";import{c as Y}from"./wallet-BB8pzZv-.js";import{P as Z}from"./pencil-ZEDbNTQg.js";import{P as C}from"./plus-_r1EMer9.js";import"./transition-JCV-Tk4J.js";import"./index-KJV2KXD7.js";import"./index-DTbb3uOn.js";import"./check-Dcy0YlFh.js";import"./index-CUAFPwAC.js";const ee=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],S=Y("funnel",ee);function ge({transactions:c,categories:D,balances:w,filters:_}){const[F,o]=h.useState(!1),[r,v]=h.useState(null),[a,d]=h.useState(_),H=()=>{m.get(route("transactions.index"),a,{preserveState:!0,preserveScroll:!0})},L=()=>{d({}),m.get(route("transactions.index"))},A=()=>{r&&m.delete(route("transactions.destroy",r.id),{onSuccess:()=>{o(!1),v(null)}})};return e.jsxs(I,{header:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Transaksi"}),e.jsx("p",{className:"text-sky-100 text-sm mt-1",children:"Kelola semua transaksi pemasukan dan pengeluaran"})]}),e.jsx(j,{href:route("transactions.create"),children:e.jsxs(l,{className:"shadow-lg",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Tambah Transaksi"]})})]}),children:[e.jsx(B,{title:"Transaksi"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsxs(N,{className:"mb-6",children:[e.jsx(z,{children:e.jsxs(M,{className:"flex items-center gap-2 text-lg",children:[e.jsx(S,{className:"w-5 h-5"}),"Filter Transaksi"]})}),e.jsxs(k,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Tipe"}),e.jsxs(u,{value:a.type||"all",onValueChange:s=>d({...a,type:s==="all"?void 0:s}),children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Semua"})}),e.jsxs(f,{children:[e.jsx(t,{value:"all",children:"Semua"}),e.jsx(t,{value:"income",children:"Pemasukan"}),e.jsx(t,{value:"expense",children:"Pengeluaran"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Dari Tanggal"}),e.jsx(b,{type:"date",value:a.start_date||"",onChange:s=>d({...a,start_date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Sampai Tanggal"}),e.jsx(b,{type:"date",value:a.end_date||"",onChange:s=>d({...a,end_date:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Kategori"}),e.jsxs(u,{value:a.category_id||"all",onValueChange:s=>d({...a,category_id:s==="all"?void 0:s}),children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Semua"})}),e.jsxs(f,{children:[e.jsx(t,{value:"all",children:"Semua Kategori"}),D.map(s=>e.jsxs(t,{value:s.id.toString(),children:[s.icon," ",s.name]},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Dompet"}),e.jsxs(u,{value:a.balance_id||"all",onValueChange:s=>d({...a,balance_id:s==="all"?void 0:s}),children:[e.jsx(p,{children:e.jsx(g,{placeholder:"Semua"})}),e.jsxs(f,{children:[e.jsx(t,{value:"all",children:"Semua Dompet"}),w.map(s=>e.jsxs(t,{value:s.id.toString(),children:[s.icon," ",s.name]},s.id))]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(l,{onClick:H,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Terapkan Filter"]}),e.jsx(l,{variant:"outline",onClick:L,children:"Reset"})]})]})]}),e.jsx(N,{children:e.jsx(k,{className:"p-0",children:c.data.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(O,{children:[e.jsx(E,{children:e.jsxs(T,{children:[e.jsx(i,{children:"Tanggal"}),e.jsx(i,{children:"Dompet"}),e.jsx(i,{children:"Kategori"}),e.jsx(i,{children:"Keterangan"}),e.jsx(i,{children:"Tipe"}),e.jsx(i,{className:"text-right",children:"Jumlah"}),e.jsx(i,{className:"text-center",children:"Aksi"})]})}),e.jsx($,{children:c.data.map(s=>e.jsxs(T,{children:[e.jsx(n,{className:"font-medium",children:R(s.transaction_date)}),e.jsx(n,{children:s.balance?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-lg flex items-center justify-center text-sm",style:{backgroundColor:s.balance.color+"20"},children:s.balance.icon}),e.jsx("span",{className:"text-sm",children:s.balance.name})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-lg",style:{backgroundColor:s.category.color+"20"},children:s.category.icon}),s.category.name]})}),e.jsx(n,{className:"max-w-xs truncate",children:s.description||"-"}),e.jsx(n,{children:e.jsx(V,{variant:s.type==="income"?"income":"expense",children:s.type==="income"?"Pemasukan":"Pengeluaran"})}),e.jsxs(n,{className:`text-right font-bold ${s.type==="income"?"text-emerald-600":"text-red-600"}`,children:[s.type==="income"?"+":"-",y(parseFloat(s.amount))]}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(j,{href:route("transactions.edit",s.id),children:e.jsx(l,{variant:"ghost",size:"icon",children:e.jsx(Z,{className:"w-4 h-4"})})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>{v(s),o(!0)},children:e.jsx(q,{className:"w-4 h-4 text-red-500"})})]})})]},s.id))})]}),c.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-sky-100",children:[e.jsxs("p",{className:"text-sm text-sky-600",children:["Menampilkan ",c.data.length," dari ",c.total," transaksi"]}),e.jsx("div",{className:"flex gap-1",children:c.links.map((s,P)=>e.jsx(l,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&m.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},P))})]})]}):e.jsxs("div",{className:"text-center py-16 text-sky-400",children:[e.jsx(K,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"Belum ada transaksi"}),e.jsx("p",{className:"text-sm mt-1",children:"Mulai catat transaksi pertama kamu!"}),e.jsx(j,{href:route("transactions.create"),className:"inline-block mt-4",children:e.jsxs(l,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Tambah Transaksi"]})})]})})})]}),e.jsx(J,{open:F,onOpenChange:o,children:e.jsxs(G,{children:[e.jsxs(Q,{children:[e.jsx(U,{children:"Hapus Transaksi"}),e.jsx(W,{children:"Apakah kamu yakin ingin menghapus transaksi ini? Tindakan ini tidak dapat dibatalkan."})]}),r&&e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-sky-50",children:[e.jsx("span",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-xl",style:{backgroundColor:r.category.color+"20"},children:r.category.icon}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.category.name}),e.jsx("p",{className:`font-bold ${r.type==="income"?"text-emerald-600":"text-red-600"}`,children:y(parseFloat(r.amount))})]})]})}),e.jsxs(X,{children:[e.jsx(l,{variant:"outline",onClick:()=>o(!1),children:"Batal"}),e.jsx(l,{variant:"destructive",onClick:A,children:"Hapus"})]})]})})]})}export{ge as default};
