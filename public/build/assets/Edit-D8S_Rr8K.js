import{u as v,j as e,H as _,L as x}from"./app-DUWjG-6a.js";import{A as k}from"./AuthenticatedLayout-C2pqy8tC.js";import{C as S,a as C,b as T,e as w,B as l}from"./button-BWY58xbn.js";import{L as n,I as m}from"./label-BUGVscvC.js";import{T as L}from"./textarea-D04gsa9o.js";import{S as p,a as h,b as j,c as u,d as g}from"./select-DbF5vKx3.js";import{T as D,a as A}from"./trending-up-CRiNccQp.js";import{W as B}from"./wallet-BB8pzZv-.js";import{S as E,A as I}from"./save-D5beqMYQ.js";import"./transition-JCV-Tk4J.js";import"./index-KJV2KXD7.js";import"./index-DTbb3uOn.js";import"./check-Dcy0YlFh.js";function q({transaction:r,categories:y,balances:d}){const{data:a,setData:i,put:f,processing:c,errors:t}=v({category_id:r.category_id.toString(),balance_id:r.balance_id?.toString()||"",type:r.type,amount:r.amount,description:r.description||"",transaction_date:r.transaction_date.split("T")[0]}),N=y.filter(s=>s.type===a.type),o=d.find(s=>s.id.toString()===a.balance_id),b=s=>{s.preventDefault(),f(route("transactions.update",r.id))};return e.jsxs(k,{header:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{href:route("transactions.index"),children:e.jsx(l,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:e.jsx(I,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Edit Transaksi"}),e.jsx("p",{className:"text-sky-100 text-sm mt-1",children:"Ubah data transaksi"})]})]}),children:[e.jsx(_,{title:"Edit Transaksi"}),e.jsx("div",{className:"mx-auto max-w-2xl px-4 sm:px-6 lg:px-8",children:e.jsxs(S,{children:[e.jsx(C,{children:e.jsx(T,{children:"Form Transaksi"})}),e.jsx(w,{children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Tipe Transaksi"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>{i({...a,type:"income",category_id:""})},className:`p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-center gap-2 ${a.type==="income"?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-sky-200 hover:border-sky-300 text-sky-600"}`,children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Pemasukan"})]}),e.jsxs("button",{type:"button",onClick:()=>{i({...a,type:"expense",category_id:""})},className:`p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-center gap-2 ${a.type==="expense"?"border-red-500 bg-red-50 text-red-700":"border-sky-200 hover:border-sky-300 text-sky-600"}`,children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Pengeluaran"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Dompet"]}),e.jsxs(p,{value:a.balance_id,onValueChange:s=>i("balance_id",s),children:[e.jsx(h,{children:e.jsx(j,{placeholder:"Pilih dompet"})}),e.jsx(u,{children:d.map(s=>e.jsx(g,{value:s.id.toString(),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.name})]})},s.id))})]}),o&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Saldo saat ini: Rp ",o.amount.toLocaleString("id-ID")]}),t.balance_id&&e.jsx("p",{className:"text-sm text-red-500",children:t.balance_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Kategori"}),e.jsxs(p,{value:a.category_id,onValueChange:s=>i("category_id",s),children:[e.jsx(h,{children:e.jsx(j,{placeholder:"Pilih kategori"})}),e.jsx(u,{children:N.map(s=>e.jsx(g,{value:s.id.toString(),children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.name})]})},s.id))})]}),t.category_id&&e.jsx("p",{className:"text-sm text-red-500",children:t.category_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Jumlah (Rp)"}),e.jsx(m,{type:"number",placeholder:"0",value:a.amount,onChange:s=>i("amount",s.target.value),min:"0",step:"1"}),t.amount&&e.jsx("p",{className:"text-sm text-red-500",children:t.amount})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Tanggal"}),e.jsx(m,{type:"date",value:a.transaction_date,onChange:s=>i("transaction_date",s.target.value)}),t.transaction_date&&e.jsx("p",{className:"text-sm text-red-500",children:t.transaction_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Keterangan (Opsional)"}),e.jsx(L,{placeholder:"Tambah keterangan transaksi...",value:a.description,onChange:s=>i("description",s.target.value),rows:3}),t.description&&e.jsx("p",{className:"text-sm text-red-500",children:t.description})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(x,{href:route("transactions.index"),className:"flex-1",children:e.jsx(l,{type:"button",variant:"outline",className:"w-full",children:"Batal"})}),e.jsxs(l,{type:"submit",disabled:c,className:"flex-1",variant:a.type==="income"?"success":"default",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),c?"Menyimpan...":"Update"]})]})]})})]})})]})}export{q as default};
